{"version":3,"sources":["../../src/util/exporter.js"],"names":["Exporter","columns","rows","headers","_buildHeaders","lines","map","_buildRow","join","forEach","column","push","title","format","showDate","row","line","name","cells","cell","index","Date","toISOString"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAAaA,Q;AACX,0BAAaC,OAAb,EAAsB;AAAA;;AACpB,eAAKA,OAAL,GAAeA,OAAf;AACD;;;;+BAEKC,I,EAAM;AACV,gBAAIC,UAAU,KAAKC,aAAL,EAAd;AACA,gBAAIC,QAAQH,KAAKI,GAAL,CAAS,KAAKC,SAAd,EAAyB,IAAzB,EAA+BC,IAA/B,CAAoC,IAApC,CAAZ;AACA,mBAAOL,UAAU,IAAV,GAAiBE,KAAxB;AACD;;;0CAEgB;AACf,gBAAIF,UAAU,CAAC,MAAD,CAAd;;AAEA,iBAAKF,OAAL,CAAaQ,OAAb,CAAqB,UAACC,MAAD,EAAY;AAC/BP,sBAAQQ,IAAR,CAAaD,OAAOE,KAAP,GAAe,IAAf,GAAsBF,OAAOG,MAA7B,GAAsC,GAAnD;AACA,kBAAIH,OAAOI,QAAX,EAAqBX,QAAQQ,IAAR,CAAaD,OAAOE,KAAP,GAAe,SAA5B;AACtB,aAHD;;AAKA,mBAAOT,QAAQK,IAAR,EAAP;AACD;;;oCAEUO,G,EAAK;AAAA;;AACd,gBAAIC,OAAO,CAACD,IAAIE,IAAL,CAAX;;AAEAF,gBAAIG,KAAJ,CAAUT,OAAV,CAAkB,UAACU,IAAD,EAAOC,KAAP,EAAiB;AACjCJ,mBAAKL,IAAL,CAAUQ,KAAK,CAAL,CAAV;;AAEA,kBAAI,MAAKlB,OAAL,CAAamB,KAAb,EAAoBN,QAAxB,EAAkC;AAChCE,qBAAKL,IAAL,CAAU,IAAIU,IAAJ,CAASF,KAAK,CAAL,CAAT,EAAkBG,WAAlB,EAAV;AACD;AACF,aAND;;AAQA,mBAAON,KAAKR,IAAL,EAAP;AACD","file":"exporter.js","sourcesContent":["export class Exporter {\n  constructor (columns) {\n    this.columns = columns\n  }\n\n  call (rows) {\n    var headers = this._buildHeaders()\n    var lines = rows.map(this._buildRow, this).join('\\n')\n    return headers + '\\n' + lines\n  }\n\n  _buildHeaders () {\n    var headers = ['Name']\n\n    this.columns.forEach((column) => {\n      headers.push(column.title + ' (' + column.format + ')')\n      if (column.showDate) headers.push(column.title + ' (time)')\n    })\n\n    return headers.join()\n  }\n\n  _buildRow (row) {\n    var line = [row.name]\n\n    row.cells.forEach((cell, index) => {\n      line.push(cell[0])\n\n      if (this.columns[index].showDate) {\n        line.push(new Date(cell[1]).toISOString())\n      }\n    })\n\n    return line.join()\n  }\n}\n"]}